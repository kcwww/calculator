{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>SB Admin 2 - Login</title>

    <!-- Custom fonts for this template-->
    <link
      href="{% static 'vendor/fontawesome-free/css/all.min.css' %}"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
      rel="stylesheet"
    />

    <!-- Custom styles for this template-->
    <link href="{% static 'css/sb-admin-2.min.css'%}" rel="stylesheet" />
  </head>

  <body class="bg-gradient-success">
    <div class="container">
      <!-- Outer Row -->
      <div class="row justify-content-center">
        <div class="col-xl-10 col-lg-12 col-md-9">
          <div class="card o-hidden border-0 shadow-lg my-5">
            <div class="card-body p-0">
              <!-- Nested Row within Card Body -->
              <div class="row">
                <div class="col-lg-6 d-none d-lg-block bg-login-image"></div>
                <div class="col-lg-6">
                  <div class="p-5">
                    <div class="text-center">
                      <h1 class="h4 text-gray-900 mb-4">Welcome Back!</h1>
                    </div>
                    {% for pro in user.profile_set.all %} <!--유저 객체에서 profile 가져옴-->
                    {{ pro.name }} {{ pro.major }} {{ pro.ad_year }}
                    {% endfor %}
                    <br><hr> 
                    {% if user.lesson_set.all %}
                    {% for class in user.lesson_set.all %} <!--수강한 과목들 유저객체에서 가져옴-->
                    <span class="badge rounded-pill bg-light"
                      >{{ class.classkind }} {{ class.classname }} {{ class.classcredits }}</span
                    ><span><a href="{% url 'delete' class.id %}">삭제하기</a></span>

                    <hr />
                    {% endfor %}
                    {% endif %}



                    {% for key,value in credits.items %}
                    {{ key }} : {{ value.0 }}/{{ value.1 }}<br>
                    {% endfor %}


                    <br><br>
                    <a href="{% url 'delete_all' %}">초기화</a>
                    <br><br>
                    

                    <div class="text-center">
                      {% if user.is_authenticated %}
                        
                      <a class="small" href="{% url 'logout' %}">log out!</a><br>
                      {% for pro in user.profile_set.all %} <!--유저 객체에서 profile 가져옴-->
                      <a class="small" href="{% url 'modify' pro.id %}">회원 정보 수정</a>
                      {% endfor %}
                      

                      {% else %}
                      <a class="small" href="{% url 'login' %}">log in!</a>
                      <br />
                      <a class="small" href="{% url 'signup' %}"
                        >Create an Account!</a
                      >
                      {% endif %}
                      <br />
                    </div>
                    <p>타과 전공수업은 자유선택으로 선택해주시길 바랍니다.</p>
                    {% if user.is_authenticated %}
                    <form action="" method="POST">
                      {% csrf_token %}

                      <input
                        type="text"
                        name="classname"
                        class="form-control form-control-user"
                        placeholder="수강 과목을 입력해주세요"
                      />
                      <input
                        type="number"
                        name="classcredits"
                        class="form-control form-control-user"
                        placeholder="학점"
                      />
                      <select name="classkind">
                        <option value="" selected disabled>수업분류</option>
                        <option value="전공필수">전공필수</option>
                        <option value="전공선택">전공선택</option>
                        <option value="균형교양">균형교양</option>
                        <option value="기초교양">기초교양</option>
                        <option value="대학별교양">대학별교양</option>
                        <option value="특화교양">특화교양</option>
                        <option value="자유선택">자유선택</option>

                      </select>

                      <input type="submit" value="추가하기" />
                    </form>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <a href="{% url 'calculator' %}">졸업 요건 확인!</a>

    <!-- Bootstrap core JavaScript-->
    <script src="{% static 'vendor/jquery/jquery.min.js' %}"></script>
    <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

    <!-- Core plugin JavaScript-->
    <script src="{% static 'vendor/jquery-easing/jquery.easing.min.js' %}"></script>

    <!-- Custom scripts for all pages-->
    <script src="{% static 'js/sb-admin-2.min.js' %}"></script>
  </body>
</html>
